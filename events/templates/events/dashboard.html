{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}
{% block content %}

<h1>Welcome, {{ user.username }}!</h1>
<p>Manage your events and quickly search for upcoming plans here.</p>

<div class="action-buttons" style="display: flex; gap: 10px; margin-bottom: 2rem;">
    <a href="{% url 'event-add' %}" class="btn-primary btn-small" style="margin-top: 0;">+ Add New Event</a>
    <a href="{% url 'event-list' %}" class="btn-secondary btn-small" style="margin-top: 0;">View My Events</a>
</div>

<form method="get" action="{% url 'dashboard' %}" style="flex-direction: row; gap: 10px; align-items: center; margin-bottom: 1.5rem;">
    <input type="text" name="q" placeholder="Search for an event..." value="{{ query|default:'' }}" style="margin-bottom: 0;">
    <button type="submit" class="btn-primary btn-small" style="margin-top: 0; padding: 0.75rem 1.5rem;">Search</button>
</form>

<hr>

{% if events %}
<h3>ðŸ“… Your Events</h3>

<table style="width:100%; border-collapse: collapse; margin-top: 1rem;">
    <thead style="background-color: var(--primary-color); color: white;">
        <tr>
            <th style="padding: 10px; text-align: left;">Title</th>
            <th style="padding: 10px; text-align: left;">Start Time</th>
            <th style="padding: 10px; text-align: left;">End Time</th>
            <th style="padding: 10px; text-align: left;">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for event in events %}
        <tr style="border-bottom: 1px solid #eee;">
            <td style="padding: 10px;">{{ event.title }}</td>
            <td style="padding: 10px;">{{ event.start_time|date:"Y-m-d H:i" }}</td>
            <td style="padding: 10px;">{{ event.end_time|date:"Y-m-d H:i" }}</td>
            <td style="padding: 10px;">
                <a href="{% url 'event-detail' event.id %}" style="color: var(--accent-color);">View</a> 
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No events found matching your search criteria.</p>
{% endif %}

{% endblock %}
